<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Topcell Weighbridge</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="shell">
        <header class="masthead">
            <div>
                <p class="eyebrow">TOPCELL Nigeria Limited</p>
                <h1>Weighbridge</h1>
                <p class="lede">Capture gross, tare, finalize, and sync to Odoo.</p>
            </div>
            <div class="badge-wrap">
                <div class="pill" id="serial-status">Serial: idle</div>
                <div class="pill neutral" id="sync-status">Sync queue: 0</div>
            </div>
        </header>

        <div class="workspace">
            <div class="column main-col">
                <section class="panel slim">
                    <div class="panel-head">
                        <p class="eyebrow">Live weight</p>
                        <button id="sync-now" class="ghost small">Sync now</button>
                    </div>
                    <div class="weight-block">
                        <div class="weight-display" id="live-weight">--.-</div>
                        <p class="subtext" id="weight-meta">Waiting for indicatorâ€¦</p>
                    </div>
                </section>

                <section class="panel">
                    <div class="panel-head">
                        <p class="eyebrow">Step 1</p>
                        <h3>Weigh in (gross)</h3>
                    </div>
                    <form id="weighin-form" class="form-grid scrollable">
                        <label>Vehicle plate<input name="vehicle_plate" required placeholder="ABC-1234"></label>
                        <label>Direction<select name="direction" required>
                            <option value="">Select</option>
                            <option>Incoming Purchase</option>
                            <option>Outgoing Sale</option>
                        </select></label>
                        <label>Supplier / Customer<input name="partner_name" required placeholder="Supplier name"></label>
                        <label>Product<input name="product_name" required placeholder="PKN / CPKO / Spares"></label>
                        <label>Operator<input name="operator_name" required placeholder="Operator"></label>
                        <label>Delivery reference<input name="delivery_reference" placeholder="PO / SO / Call-up"></label>
                        <label>Driver name<input name="driver_name" placeholder="Optional"></label>
                        <label>Driver phone<input name="driver_phone" placeholder="Optional"></label>
                        <label>Remarks<input name="remarks" placeholder="Optional note"></label>
                        <label>Override gross (kg)<input name="gross_kg" type="number" step="0.01" placeholder="Leave blank to use live"></label>
                        <button type="submit" class="primary">Capture gross</button>
                    </form>
                </section>
            </div>

            <div class="column side-col">
                <section class="panel slim">
                    <div class="panel-head">
                        <p class="eyebrow">Serial</p>
                        <div class="actions">
                            <button id="connect-serial" class="ghost small">Connect</button>
                            <button id="disconnect-serial" class="ghost small danger">Disconnect</button>
                        </div>
                    </div>
                    <form id="serial-form" class="stacked scrollable">
                        <label>Port<input name="port" placeholder="COM3" required></label>
                        <label>Baud rate<input name="baudrate" type="number" value="9600" required></label>
                        <label>Data bits<input name="bytesize" type="number" value="8" required></label>
                        <label>Parity<select name="parity">
                            <option value="N">None</option>
                            <option value="O">Odd</option>
                            <option value="E">Even</option>
                            <option value="M">Mark</option>
                            <option value="S">Space</option>
                        </select></label>
                        <label>Stop bits<input name="stopbits" type="number" value="1" step="0.5" required></label>
                        <label class="checkbox"><input type="checkbox" name="simulate"> Simulate weight (dev/test)</label>
                        <button type="submit" class="primary">Save & connect</button>
                    </form>
                </section>

                <section class="panel slim">
                    <div class="panel-head">
                        <p class="eyebrow">Step 2</p>
                        <h3>Weigh out (tare)</h3>
                    </div>
                    <form id="weighout-form" class="stacked scrollable">
                        <label>Ticket ID<input name="ticket_id" type="number" required></label>
                        <label>Override tare (kg)<input name="tare_kg" type="number" step="0.01" placeholder="Leave blank to use live"></label>
                        <button type="submit" class="primary">Capture tare</button>
                    </form>
                </section>

                <section class="panel slim">
                    <div class="panel-head">
                        <p class="eyebrow">Step 3</p>
                        <h3>Finalize</h3>
                    </div>
                    <form id="finalize-form" class="stacked scrollable">
                        <label>Ticket ID<input name="ticket_id" type="number" required></label>
                        <label>QC status<select name="qc_status">
                            <option value="">Keep pending</option>
                            <option value="pass">Pass</option>
                            <option value="fail">Fail</option>
                        </select></label>
                        <label>QC note<textarea name="qc_note" rows="2" placeholder="Optional QC note"></textarea></label>
                        <label>Remarks<textarea name="remarks" rows="2" placeholder="Optional note"></textarea></label>
                        <button type="submit" class="primary">Finalize ticket</button>
                    </form>
                </section>
            </div>
        </div>

        <section class="panel wide tickets-panel">
            <div class="panel-head">
                <div>
                    <p class="eyebrow">Tickets</p>
                    <h3>Recent activity</h3>
                </div>
                <button id="refresh-tickets" class="ghost small">Refresh</button>
            </div>
            <div class="table-wrap tickets-box">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Ticket #</th>
                            <th>Vehicle</th>
                            <th>Direction</th>
                            <th>Gross</th>
                            <th>Tare</th>
                            <th>Net</th>
                            <th>Status</th>
                            <th>Partner</th>
                            <th>Product</th>
                            <th>Updated</th>
                        </tr>
                    </thead>
                    <tbody id="ticket-table"></tbody>
                </table>
            </div>
        </section>

        <div id="toast" class="toast hidden"></div>
    </div>
    <script src="/static/app.js"></script>
</body>
</html>
